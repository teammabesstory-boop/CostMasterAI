<Window
    x:Class="CostMasterAI.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ic="using:FluentIcons.WinUI"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource AppBackgroundBrush}">

        <Grid.Resources>
            <FontFamily x:Key="RemixIcon">/Assets/remixicon.ttf#remixicon</FontFamily>
            <FontFamily x:Key="AppFont">/Assets/Satoshi-Regular.otf#Satoshi</FontFamily>
            <FontFamily x:Key="AppFontMedium">/Assets/Satoshi-Medium.otf#Satoshi</FontFamily>
            <FontFamily x:Key="AppFontBold">/Assets/Satoshi-Bold.otf#Satoshi</FontFamily>

            <Style TargetType="NavigationViewItem">
                <Setter Property="FontFamily" Value="{StaticResource AppFontMedium}"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="Foreground" Value="{ThemeResource TextPrimaryBrush}"/>
                <Setter Property="Margin" Value="0,6"/>
            </Style>

            <Style x:Key="NavIconStyle" TargetType="ic:SymbolIcon">
                <Setter Property="FontSize" Value="24"/>
                <Setter Property="Foreground" Value="{ThemeResource TextPrimaryBrush}"/>
            </Style>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="AppTitleBar" Height="48" Grid.Row="0" Canvas.ZIndex="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Border Background="{ThemeResource CardBackgroundBrush}" CornerRadius="12" Padding="8,4">
                <Border.Shadow>
                    <ThemeShadow />
                </Border.Shadow>
                <StackPanel Orientation="Horizontal" Spacing="12" Padding="16,0,12,0" VerticalAlignment="Center">
                    <Image Source="/Assets/Square44x44Logo.targetsize-24_altform-unplated.png" Width="24" Height="24"/>
                    <TextBlock Text="CostMaster AI" FontSize="14" FontFamily="{StaticResource AppFontBold}" Opacity="0.9" VerticalAlignment="Center" Foreground="{ThemeResource TextPrimaryBrush}"/>

                    <Border Background="{ThemeResource SubtleBackgroundBrush}" CornerRadius="6" Padding="8,4" Margin="8,0,0,0">
                        <TextBlock Text="BETA" FontSize="11" FontFamily="{StaticResource AppFontBold}" Foreground="{ThemeResource TextSecondaryBrush}"/>
                    </Border>
                </StackPanel>
            </Border>

            <Button Grid.Column="2" Click="ToggleThemeButton_Click" Background="Transparent" BorderThickness="0" Margin="0,0,140,0">
                <ic:SymbolIcon Symbol="WeatherMoon" FontSize="20" Foreground="{ThemeResource TextPrimaryBrush}"/>
                <ToolTipService.ToolTip>Switch Theme</ToolTipService.ToolTip>
            </Button>
        </Grid>

        <NavigationView x:Name="NavView" 
                        Grid.Row="1"
                        PaneDisplayMode="Left"
                        IsSettingsVisible="True"
                        SelectionChanged="NavView_SelectionChanged"
                        Loaded="NavView_Loaded"
                        OpenPaneLength="280">

            <NavigationView.MenuItems>
                <NavigationViewItem Tag="dashboard" Content="Dashboard">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Home" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Tag="ingredients" Content="Bahan Baku">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Food" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Tag="recipes" Content="Resep (Recipes)">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Book" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Tag="shopping" Content="Belanja (Shopping)">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Cart" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Tag="reports" Content="Laporan (Reports)">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="ChartMultiple" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator/>
                <NavigationViewItem Tag="ai_assistant" Content="AI Assistant">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Bot" Style="{StaticResource NavIconStyle}" Foreground="{ThemeResource AccentBrush}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

            </NavigationView.MenuItems>

            <NavigationView.FooterMenuItems>
                <NavigationViewItem Content="User Profile" Tag="profile" SelectsOnInvoked="False">
                    <NavigationViewItem.Icon>
                        <ic:SymbolIcon Symbol="Person" Style="{StaticResource NavIconStyle}"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <Frame x:Name="ContentFrame" Background="{ThemeResource AppBackgroundBrush}">
                <Frame.ContentTransitions>
                    <TransitionCollection>
                        <NavigationThemeTransition>
                            <NavigationThemeTransition.DefaultNavigationTransitionInfo>
                                <DrillInNavigationTransitionInfo />
                            </NavigationThemeTransition.DefaultNavigationTransitionInfo>
                        </NavigationThemeTransition>
                    </TransitionCollection>
                </Frame.ContentTransitions>
            </Frame>

        </NavigationView>
    </Grid>
</Window>
